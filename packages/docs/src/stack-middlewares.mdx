---
name: stack middlewares
---
# stack middlewares together

middlewares get called in the order that they are registered with `app.use(...)`.
when a middleware calls `next()`, koa calls the next middleware downsteam if are any available.


> the middleware "stack"

```typescript
// serial-middlewares/server.ts
const requestCounter: Middleware = async (ctx, next) => {
  ++ctx.serialExample.requestCount
  console.log(`request #${ctx.serialExample.requestCount}\n`)
  await next()
}
// ...
  app.context.serialExample = { requestCount: 0 }
  app.use(loggerMiddleware) // see prior example
  app.use(requestCounter)

// $ curl localhost:3000
//   before
//   request #1
//   after
// $ curl localhost:3000
//   before
//   request #2
//   after
```
